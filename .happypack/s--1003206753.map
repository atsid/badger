{"version":3,"sources":["client/stores/user_store.js"],"names":["request","require","UserStore","state","currentUser","currentUserPromise","promise","Promise","resolve","result","get","then","res","body","catch","module","exports"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,6BAAR,CAAhB;;AAEA;;;;IAGMC,S;AACJ,uBAAc;AAAA;;AACZ,SAAKC,KAAL,GAAa;AACXC,mBAAa,IADF;AAEXC,0BAAoB;AAFT,KAAb;AAID;;;;qCAEgB;AAAA;;AACf,UAAIC,gBAAJ;AACA,UAAI,KAAKH,KAAL,CAAWC,WAAf,EAA4B;AAC1BE,kBAAUC,QAAQC,OAAR,CAAgB,KAAKL,KAAL,CAAWC,WAAX,CAAuBK,MAAvC,CAAV;AACD,OAFD,MAEO,IAAI,KAAKN,KAAL,CAAWE,kBAAf,EAAmC;AACxCC,kBAAU,KAAKH,KAAL,CAAWE,kBAArB;AACD,OAFM,MAEA;AACLC,kBAAU,KAAKH,KAAL,CAAWE,kBAAX,GAAgCL,QAAQU,GAAR,CAAY,mBAAZ,EACvCC,IADuC,CAClC,UAACC,GAAD,EAAS;AACb,gBAAKT,KAAL,CAAWC,WAAX,GAAyB,EAACK,QAAQG,IAAIC,IAAb,EAAzB;AACA,iBAAOD,IAAIC,IAAX;AACD,SAJuC,EAKvCC,KALuC,CAKjC,YAAM;AACX,gBAAKX,KAAL,CAAWC,WAAX,GAAyB,EAACK,QAAQ,IAAT,EAAzB;AACA,iBAAO,IAAP;AACD,SARuC,CAA1C;AASD;AACD,aAAOH,OAAP;AACD;;;;;;AAGHS,OAAOC,OAAP,GAAiBd,SAAjB","file":"user_store.js","sourceRoot":"/Users/ctrevino/Workspace/ats/badger","sourcesContent":["const request = require('superagent-bluebird-promise');\n\n/**\n * A data store for Projects\n */\nclass UserStore {\n  constructor() {\n    this.state = {\n      currentUser: null,\n      currentUserPromise: null,\n    };\n  }\n\n  getCurrentUser() {\n    let promise;\n    if (this.state.currentUser) {\n      promise = Promise.resolve(this.state.currentUser.result);\n    } else if (this.state.currentUserPromise) {\n      promise = this.state.currentUserPromise;\n    } else {\n      promise = this.state.currentUserPromise = request.get('/api/auth/current')\n        .then((res) => {\n          this.state.currentUser = {result: res.body};\n          return res.body;\n        })\n        .catch(() => {\n          this.state.currentUser = {result: null};\n          return null;\n        });\n    }\n    return promise;\n  }\n}\n\nmodule.exports = UserStore;\n"]}